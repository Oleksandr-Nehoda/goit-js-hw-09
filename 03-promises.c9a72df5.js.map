{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,MAAOC,SAASC,cAAc,kBAC9BC,KAAMF,SAASC,cAAc,iBAC7BE,OAAQH,SAASC,cAAc,mBAC/BG,iBAAkBJ,SAASC,cAAc,oBAK3C,SAASI,EAAcC,EAAUP,GAE/B,OAAO,IAAIQ,SAAQ,CAACC,EAASC,KACLC,KAAKC,SAAW,GAGpCH,EAAQ,C,SAACF,E,MAAUP,IAEnBU,EAAO,C,SAACH,E,MAAUP,OAVxBD,EAAKM,iBAAiBQ,iBAAiB,SAevC,SAAyBC,GACvBA,EAAMC,iBAEN,IAAIC,EAAW,KACXC,EAAQC,OAAOnB,EAAKC,MAAMmB,OAC1BC,EAAYF,OAAOnB,EAAKI,KAAKgB,OAC7Bf,EAASc,OAAOnB,EAAKK,OAAOe,OAG/B,MAAME,EAAeC,YAAW,KAE/BN,GAAY,EACRA,GAAYZ,EAEdE,EAAcU,EAAUC,GACvBM,MAAK,EAAChB,SAAEA,EAAQP,MAAEA,MACjBwB,EAAA3B,GAAS4B,OAAOC,QAAQ,uBAAqBnB,QAAiBP,UAE/D2B,OAAM,EAACpB,SAAEA,EAAQP,MAAEA,MAClBwB,EAAA3B,GAAS4B,OAAOG,QAAQ,sBAAoBrB,QAAiBP,UAE9D6B,SAAQ,KAEPZ,GAAgBG,KAIlBU,aAAaT,GAGf,MAAMU,EAAgBC,aAAc,KACjChB,GAAY,EACRA,GAAYZ,EAEdE,EAAcU,EAAUC,GACvBM,MAAK,EAAChB,SAAEA,EAAQP,MAAEA,MAClBwB,EAAA3B,GAAS4B,OAAOC,QAAQ,uBAAqBnB,QAAiBP,UAE9D2B,OAAM,EAACpB,SAAEA,EAAQP,MAAEA,MACnBwB,EAAA3B,GAAS4B,OAAOG,QAAQ,sBAAoBrB,QAAeP,UAE3D6B,SAAQ,KACPZ,GAAgBG,KAIlBa,cAAcF,KAGhBX,KAEDH","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  btnCreatePromise: document.querySelector('[type=\"submit\"]'),\n}\n\nrefs.btnCreatePromise.addEventListener('click', onCreatePromise);\n\nfunction createPromise(position, delay) {\n\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n   if (shouldResolve) {\n      resolve({position, delay})\n    } else {\n      reject({position, delay})\n    }\n  });\n}\n\nfunction onCreatePromise(event) {\n  event.preventDefault();\n\n  let position = null;\n  let delay = Number(refs.delay.value);\n  let delayStep = Number(refs.step.value);\n  let amount = Number(refs.amount.value);\n  \n\n   const timerTimeout = setTimeout(() => {\n\n    position += 1; \n    if (position <= amount) {\n\n      createPromise(position, delay)\n      .then(({ position, delay }) => {\n        Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n      })\n      .finally(() => {\n\n        delay = delay + delayStep;\n      })\n\n    } else {\n      clearTimeout(timerTimeout);\n    }\n\n    const timerInterval = setInterval ( () => {\n       position += 1; \n       if (position <= amount) {\n   \n         createPromise(position, delay)\n         .then(({ position, delay }) => {\n          Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n         })\n         .catch(({ position, delay }) => {\n          Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n         })\n         .finally(() => {\n           delay = delay + delayStep;\n         })\n   \n       } else {\n         clearInterval(timerInterval);\n       }\n      \n     },delayStep);\n    \n   }, delay);\n}\n\n\n\n\n\n\n\n\n\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$refs","delay","document","querySelector","step","amount","btnCreatePromise","$47d4ff9957288465$var$createPromise","position","Promise","resolve","reject","Math","random","addEventListener","event","preventDefault","position1","delay1","Number","value","delayStep","timerTimeout","setTimeout","then","$parcel$interopDefault","Notify","success","catch","failure","finally","clearTimeout","timerInterval","setInterval","clearInterval"],"version":3,"file":"03-promises.c9a72df5.js.map"}