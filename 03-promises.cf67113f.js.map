{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,MAAOC,SAASC,cAAc,kBAC9BC,KAAMF,SAASC,cAAc,iBAC7BE,OAAQH,SAASC,cAAc,mBAC/BG,iBAAkBJ,SAASC,cAAc,oBAK3C,SAASI,EAAcC,EAAUP,GAE/B,OAAO,IAAIQ,SAAQ,SAACC,EAASC,GACLC,KAAKC,SAAW,GAGpCH,EAAQ,CAACF,WAAUP,UAEnBU,EAAO,CAACH,WAAUP,aAVxBD,EAAKM,iBAAiBQ,iBAAiB,SAevC,SAAyBC,GACvBA,EAAMC,iBAEN,IAAIC,EAAW,KACXC,EAAQC,OAAOnB,EAAKC,MAAMmB,OAC1BC,EAAYF,OAAOnB,EAAKI,KAAKgB,OAC7Bf,EAASc,OAAOnB,EAAKK,OAAOe,OAGzBE,EAAeC,YAAW,YAE/BN,GAAY,IACIZ,EAEdE,EAAcU,EAAUC,GACvBM,MAAK,SAAAC,G,IAAGjB,EAAQiB,EAARjB,SAAUP,EAAKwB,EAALxB,MACjByB,EAAA5B,GAAS6B,OAAOC,QAAQ,uBAAwCC,OAAfrB,EAAS,QAAYqB,OAAN5B,EAAM,UAEvE6B,OAAM,SAAAL,G,IAAGjB,EAAQiB,EAARjB,SAAUP,EAAKwB,EAALxB,MAClByB,EAAA5B,GAAS6B,OAAOI,QAAQ,sBAAuCF,OAAfrB,EAAS,QAAYqB,OAAN5B,EAAM,UAEtE+B,SAAQ,WAEPd,GAAgBG,KAIlBY,aAAaX,GAGf,IAAMY,EAAgBC,aAAc,YACjClB,GAAY,IACIZ,EAEdE,EAAcU,EAAUC,GACvBM,MAAK,SAAAC,G,IAAGjB,EAAQiB,EAARjB,SAAUP,EAAKwB,EAALxB,MAClByB,EAAA5B,GAAS6B,OAAOC,QAAQ,uBAAwCC,OAAfrB,EAAS,QAAYqB,OAAN5B,EAAM,UAEtE6B,OAAM,SAAAL,G,IAAGjB,EAAQiB,EAARjB,SAAUP,EAAKwB,EAALxB,MACnByB,EAAA5B,GAAS6B,OAAOI,QAAQ,sBAAqCF,OAAfrB,EAAS,QAAYqB,OAAN5B,EAAM,UAEnE+B,SAAQ,WACPd,GAAgBG,KAIlBe,cAAcF,KAGhBb,KAEDH,M","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  btnCreatePromise: document.querySelector('[type=\"submit\"]'),\n}\n\nrefs.btnCreatePromise.addEventListener('click', onCreatePromise);\n\nfunction createPromise(position, delay) {\n\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n   if (shouldResolve) {\n      resolve({position, delay})\n    } else {\n      reject({position, delay})\n    }\n  });\n}\n\nfunction onCreatePromise(event) {\n  event.preventDefault();\n\n  let position = null;\n  let delay = Number(refs.delay.value);\n  let delayStep = Number(refs.step.value);\n  let amount = Number(refs.amount.value);\n  \n\n   const timerTimeout = setTimeout(() => {\n\n    position += 1; \n    if (position <= amount) {\n\n      createPromise(position, delay)\n      .then(({ position, delay }) => {\n        Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n      })\n      .finally(() => {\n\n        delay = delay + delayStep;\n      })\n\n    } else {\n      clearTimeout(timerTimeout);\n    }\n\n    const timerInterval = setInterval ( () => {\n       position += 1; \n       if (position <= amount) {\n   \n         createPromise(position, delay)\n         .then(({ position, delay }) => {\n          Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n         })\n         .catch(({ position, delay }) => {\n          Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n         })\n         .finally(() => {\n           delay = delay + delayStep;\n         })\n   \n       } else {\n         clearInterval(timerInterval);\n       }\n      \n     },delayStep);\n    \n   }, delay);\n}\n\n\n\n\n\n\n\n\n\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$refs","delay","document","querySelector","step","amount","btnCreatePromise","$ce04d3a99e08e73b$var$createPromise","position","Promise","resolve","reject","Math","random","addEventListener","event","preventDefault","position1","delay1","Number","value","delayStep","timerTimeout","setTimeout","then","param","$parcel$interopDefault","Notify","success","concat","catch","failure","finally","clearTimeout","timerInterval","setInterval","clearInterval"],"version":3,"file":"03-promises.cf67113f.js.map"}